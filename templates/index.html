<!DOCTYPE html>
<html>
<head>
  <title>Smart Query Assistant</title>
  <link rel="icon" href="/static/images/piq.png" type="image/png">
  <script src="https://unpkg.com/htmx.org@1.9.2"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/default.min.css">  
  <link rel="stylesheet" href="/static/style.css">

  <div id="header">
    <div class="logo-container">
      <img src="/static/images/premiumiq.png" alt="PremiumIQ" class="wide-logo">
    </div>
    <h1>Smart Query Assistant</h1>
    <div class="user-container">
      <img src="/static/images/user.png" alt="User" id="user-icon" class="user-icon">
    </div>    
  </div>

  <div id="container">
    <div id="chat"></div>

    <div id="working-indicator" class="working"></div>

    <button id="jump-btn" class="jump-btn" title="Skip to bottom">&#x2193;</button>

    <form id="question-form">
      <input type="text" id="question-input" placeholder="Ask a question..." required />
      <button type="submit" id="ask-btn">Ask</button>
      <button type="button" id="stop-btn">Stop</button>
    </form>
  </div>

  <div id="user-profile-modal" class="modal">
      <div class="modal-content">
          <div class="modal-header">
              <h2>User Profile</h2>
              <span class="close">&times;</span>
          </div>
          <div class="modal-body">
              <form id="user-profile-form">
                  <input type="hidden" id="user-id" name="user_id">
                  
                  <div class="form-group">
                      <label for="user-name">Name</label>
                      <input type="text" id="user-name" name="user_name" required>
                  </div>
                  
                  <div class="form-group">
                      <label for="user-context">Profile Context</label>
                      <textarea id="user-context" name="user_context" rows="4"></textarea>
                  </div>
                  
                  <div class="calendar-context">
                      <h4>Calendar Context</h4>
                      <p id="calendar-context-text"></p>
                  </div>
                  
                  <div class="modal-footer">
                      <button type="button" id="save-profile-btn" class="admin-btn primary">Save</button>
                      <button type="button" id="close-profile-btn" class="admin-btn">Close</button>
                  </div>
              </form>
          </div>
      </div>
  </div>

  <script src="/static/script.js"></script>
  <script src="/static/chart_templates.js"></script>
  <script src="/static/user-profile.js"></script>  
</body>
</html>